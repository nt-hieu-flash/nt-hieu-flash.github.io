const PLOT_POINTS = [
  {"x":47.09302325581396,"y":12.11031175059952},
  {"x":49.28940568475453,"y":13.908872901678656},
  {"x":51.48578811369511,"y":17.1462829736211},
  {"x":53.16537467700259,"y":20.863309352517987},
  {"x":54.7157622739018,"y":23.741007194244606},
  {"x":54.7157622739018,"y":26.139088729016784},
  {"x":54.06976744186047,"y":28.297362110311752},
  {"x":54.7157622739018,"y":30.09592326139089},
  {"x":56.00775193798451,"y":32.25419664268585},
  {"x":57.94573643410853,"y":33.932853717026376},
  {"x":59.88372093023256,"y":35.25179856115108},
  {"x":61.17571059431525,"y":36.69064748201439},
  {"x":60.91731266149871,"y":37.88968824940047},
  {"x":60.01291989664084,"y":38.84892086330935},
  {"x":58.59173126614987,"y":39.44844124700239},
  {"x":57.94573643410853,"y":40.52757793764987},
  {"x":58.333333333333336,"y":42.086330935251794},
  {"x":59.23772609819123,"y":43.16546762589928},
  {"x":59.88372093023256,"y":43.884892086330936},
  {"x":59.49612403100777,"y":44.724220623501196},
  {"x":58.850129198966414,"y":45.32374100719424},
  {"x":58.333333333333336,"y":45.68345323741007},
  {"x":57.687338501292004,"y":45.98345323741007},
  {"x":58.333333333333336,"y":46.163069544364504},
  {"x":59.23772609819123,"y":46.52278177458034},
  {"x":59.49612403100777,"y":47.12230215827338},
  {"x":59.23772609819123,"y":47.96163069544364},
  {"x":58.97932816537469,"y":48.32134292565948},
  {"x":58.204134366925075,"y":48.920863309352505},
  {"x":57.94573643410853,"y":49.52038369304556},
  {"x":57.94573643410853,"y":50.11990407673861},
  {"x":58.204134366925075,"y":51.07913669064747},
  {"x":58.333333333333336,"y":52.15827338129496},
  {"x":58.204134366925075,"y":52.877697841726615},
  {"x":57.94573643410853,"y":53.71702637889687},
  {"x":57.2997416020672,"y":54.31654676258992},
  {"x":56.65374677002586,"y":54.916067146282955},
  {"x":56.00775193798451,"y":55.15587529976019},
  {"x":55.103359173126634,"y":55.51558752997602},
  {"x":53.81136950904395,"y":56.11510791366907},
  {"x":52.51937984496126,"y":56.11510791366907},
  {"x":52.51937984496126,"y":56.11510791366907},
  {"x":51.098191214470305,"y":56.11510791366907},
  {"x":49.28940568475453,"y":55.87529976019183},
  {"x":47.60981912144704,"y":55.87529976019183},
  {"x":46.05943152454781,"y":55.75539568345324},
  {"x":45.02583979328167,"y":56.35491606714628},
  {"x":43.73385012919898,"y":56.95443645083932},
  {"x":43.2170542635659,"y":57.9136690647482},
  {"x":42.57105943152456,"y":59.71223021582732},
  {"x":41.279069767441875,"y":62.110311750599514},
  {"x":40.63307493540053,"y":63.90887290167865},
  {"x":39.34108527131784,"y":65.70743405275779},
  {"x":38.04909560723516,"y":67.5059952038369},
  {"x":37.015503875969,"y":68.94484412470024},
  {"x":35.72351421188632,"y":70.74340527577937},
  {"x":34.431524547803626,"y":72.30215827338128},
  {"x":33.78552971576228,"y":73.8609112709832},
  {"x":33.13953488372094,"y":75.05995203836929},
  {"x":32.493540051679595,"y":76.73860911270982},
  {"x":32.23514211886307,"y":78.29736211031174},
  {"x":32.493540051679595,"y":79.85611510791367}
];

const FACE_COUNT = 25;

let faceGraphics = [];
let midX, midY;

function setup()  {
  w_idth = document.getElementById("About").clientWidth;
  if(w_idth>768){w_idth = w_idth*0.3;}
  else{w_idth = w_idth*0.5;}
  let output = createCanvas(w_idth, w_idth);
  output.parent('neon-face');
  imageMode(CENTER);

  midX = width * 0.5;
  midY = height * 0.55;
  
  const graphics = createGraphics(width, height);
  const profile = PLOT_POINTS.map((item) => {
    return {
      x: item.x * 0.01 * width,
      y: item.y * 0.01 * height
    }
  });
  
  graphics.stroke('rgb(250,250,250)');
  graphics.noFill();

  graphics.strokeWeight(8);
  graphics.beginShape();
  profile.forEach((item) => graphics.vertex(item.x, item.y));
  graphics.endShape();
  graphics.filter(BLUR, 2);

  graphics.strokeWeight(5);
  graphics.beginShape();
  profile.forEach((item) => graphics.vertex(item.x, item.y));
  graphics.endShape();
  
  for(let i = 0; i < FACE_COUNT; i++) {
    const wh = map(i, 0, FACE_COUNT - 1, width * 1.4, width * 0.5);
    
    faceGraphics.push({
      x: midX,
      y: midY,
      wh: wh,
      s: map(i, 0, FACE_COUNT - 1, 0, TWO_PI),
      graphics: graphics
    });
  }
}

function draw() {
  background(250,250,250);
  faceGraphics.forEach((face) => {
    image(face.graphics, face.x + sin(face.s += 0.03) * 50, face.y, face.wh, face.wh);
  });
}
